"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _createForOfIteratorHelper(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=c.call(a)},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c["return"]||c["return"]()}finally{if(h)throw f}}}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f=[],g=!0,h=!1;try{for(c=c.call(a);!(g=(d=c.next()).done)&&(f.push(d.value),!(b&&f.length===b));g=!0);}catch(a){h=!0,e=a}finally{try{g||null==c["return"]||c["return"]()}finally{if(h)throw e}}return f}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Shuang={resource:{dict:{},schemeList:{},scheme:{},emoji:{right:"\u2705",wrong:"\u274E"}},core:{model:{},current:{},order:{shengIndex:0,yunIndex:0},history:[]},app:{setting:{config:{},reload:function reload(){}},staticJS:0,modeList:[],action:{}}},$=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document);function importJS(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:function(){Shuang.app.staticJS++};a="build/".concat(a,".min.js");var c=document.createElement("script");Object.assign(c,{src:a,onload:b}),document.body.appendChild(c)}Shuang.resource.dict={a:{";":"\u4E5F",g:"\u554A",n:"\u6697",o:"\u5B89",u:"\u6309",w:"\u7231"},b:{";":"\u4E0D",b:"\u529E",d:"\u8D25",e:"\u5907",f:"\u5317",g:"\u5427",h:"\u5954",i:"\u88AB",j:"\u5E2E",k:"\u6BD4",m:"\u672C",n:"\u5DF4",o:"\u5B9D",q:"\u5175",r:"\u79D8",s:"\u6CE2",t:"\u822C",u:"\u90E8",w:"\u516B",y:"\u534A"},c:{";":"\u6210",a:"\u85CF",d:"\u8D22",e:"\u5904",f:"\u695A",g:"\u5403",h:"\u4F20",i:"\u521D",j:"\u9519",k:"\u8F66",l:"\u573A",m:"\u523A",n:"\u627F",o:"\u5BDF",r:"\u957F",s:"\u6C89",t:"\u8239",u:"\u51B2",v:"\u5C42",w:"\u91C7",x:"\u53C2",y:"\u5355"},d:{";":"\u7684",b:"\u5200",d:"\u7535",e:"\u72EC",f:"\u70B9",h:"\u4EE3",i:"\u8C03",j:"\u6BD2",k:"\u987F",l:"\u5730",m:"\u9876",n:"\u961F",o:"\u6597",q:"\u7684",r:"\u7B54",s:"\u6DE1",u:"\u5E97",v:"\u5BFC",x:"\u5BF9",y:"\u65AD"},e:{";":"\u800C",d:"\u6069",e:"\u513F",h:"\u800C",j:"\u4E8C",m:"\u6076",n:"\u963F"},f:{";":"\u5206",a:"\u8303",b:"\u98DE",c:"\u670D",e:"\u51E4",f:"\u975E",h:"\u4F5B",i:"\u623F",j:"\u592B",k:"\u526F",l:"\u5C01",n:"\u9632",o:"\u5BCC",r:"\u590D",s:"\u6CD5",t:"\u53CD",u:"\u653E",v:"\u8D39",w:"\u7236"},g:{";":"\u4E2A",b:"\u59D1",c:"\u7EA2",d:"\u8D35",e:"\u591F",f:"\u683C",g:"\u8DDF",h:"\u4E2A",i:"\u8BE5",j:"\u89C4",k:"\u5149",l:"\u8D76",m:"\u6545",o:"\u5BAB",q:"\u9B3C",r:"\u544A",s:"\u6E2F",u:"\u9AD8",v:"\u6562",w:"\u8C37",x:"\u89C2",y:"\u5173"},h:{";":"\u548C",a:"\u82B1",b:"\u5A5A",c:"\u7F13",d:"\u9ED1",e:"\u5FFD",f:"\u864E",g:"\u547C",h:"\u5316",i:"\u5F88",j:"\u73AF",k:"\u4E92",m:"\u9EC4",n:"\u5B69",o:"\u5BD2",q:"\u7687",r:"\u548C",s:"\u6D77",t:"\u540E",u:"\u62A4",w:"\u4E4E",x:"\u6B22",y:"\u706B"},i:{";":"\u4EE5",x:"\u4EE5"},j:{";":"\u5C31",a:"\u8B66",b:"\u52A0",c:"\u7ED3",d:"\u89C1",e:"\u53CA",f:"\u7981",g:"\u53EB",h:"\u4EF6",i:"\u8BB0",j:"\u9759",k:"\u8F66",l:"\u5883",m:"\u6551",n:"\u666F",o:"\u4E3E",p:"\u95F4",r:"\u7B80",s:"\u6FC0",t:"\u8FD1",u:"\u6280",v:"\u5373",x:"\u52B2",y:"\u7CBE"},k:{";":"\u53EF",a:"\u82E6",d:"\u56F0",e:"\u72C2",f:"\u5361",g:"\u53E3",h:"\u4F1A",j:"\u5F00",l:"\u5757",m:"\u514B",o:"\u5BA2",r:"\u79D1",u:"\u523B"},l:{";":"\u4E86",a:"\u4E34",b:"\u529B",c:"\u7EC3",d:"\u7565",e:"\u4E50",f:"\u6797",g:"\u8DEF",h:"\u5217",i:"\u826F",j:"\u5F04",k:"\u8FDE",l:"\u9732",m:"\u4E24",n:"\u91CF",r:"\u5229",s:"\u6CEA",u:"\u62C9",v:"\u7075",y:"\u7C7B"},m:{";":"\u4EEC",a:"\u83AB",b:"\u5999",c:"\u4E70",d:"\u9ED8",e:"\u731B",f:"\u6A21",g:"\u5417",h:"\u9762",k:"\u4E07",m:"\u67D0",n:"\u660E",o:"\u6162",p:"\u95E8",r:"\u6BCF",s:"\u6CA1",u:"\u9B54",v:"\u6C11",y:"\u7F8E"},n:{";":"\u4F60",b:"\u5A18",c:"\u8111",d:"\u5185",g:"\u5462",h:"\u5FF5",i:"\u519C",j:"\u5F04",m:"\u5357",o:"\u5B81",r:"\u5E74",v:"\u90A3",x:"\u96BE"},o:{";":"\u6211",k:"\u533A"},p:{";":"\u5E73",b:"\u76AE",c:"\u670B",g:"\u54C1",h:"\u4FBF",i:"\u623F",l:"\u5E73",m:"\u914D",o:"\u6015",q:"\u7247",s:"\u6D3E",t:"\u76D8",u:"\u65C1",y:"\u666E"},q:{";":"\u8D77",d:"\u4E14",f:"\u5361",g:"\u5668",h:"\u4F01",i:"\u8BF7",j:"\u94B1",k:"\u5207",l:"\u53BB",m:"\u53D6",o:"\u60C5",r:"\u5343",s:"\u6E05",u:"\u4EB2",v:"\u7FA4",y:"\u524D"},r:{";":"\u4EBA",a:"\u82E5",b:"\u5982",e:"\u7136",h:"\u4ECD",i:"\u8BA4",k:"\u8F6F",n:"\u65E5",o:"\u5BB9",u:"\u70ED",w:"\u5165",x:"\u67D4"},s:{";":"\u662F",a:"\u82CF",b:"\u59CB",c:"\u4E66",d:"\u56DB",e:"\u8272",f:"\u677E",g:"\u5E08",h:"\u4F7F",i:"\u8BF4",j:"\u793A",k:"\u5C11",l:"\u58F0",m:"\u6563",n:"\u65F6",o:"\u5BA4",p:"\u95EA",q:"\u987A",r:"\u5931",s:"\u6C34",t:"\u6240",u:"\u5546",v:"\u53F8",w:"\u53D7",x:"\u53C2",y:"\u6570"},t:{";":"\u4ED6",b:"\u5979",c:"\u8131",d:"\u56FE",e:"\u6761",g:"\u8DF3",h:"\u4ED6",i:"\u8C03",j:"\u66FF",k:"\u5802",l:"\u571F",n:"\u9898",o:"\u7A81",r:"\u7279",u:"\u6258",v:"\u9000",w:"\u9003",x:"\u53F0"},u:_defineProperty({";":"\u6709",a:"\u8981",b:"\u5427",c:"\u91CD",d:"\u7B2C",e:"\u4E45",f:"\u4F1A",g:"\u957F",i:"\u62FF",q:"\u81EA",r:"\u5982",s:"\u5979",t:"\u4F53",u:"\u5E94",v:"\u79CD",w:"\u4E8E",x:"\u5BF9"},";","\u6B63"),v:{";":"\u8FD9"},w:{";":"\u4E3A",c:"\u7EF4",d:"\u56F4",e:"\u52A1",g:"\u5473",h:"\u4F4D",i:"\u5FAE",j:"\u6B66",k:"\u4E07",m:"\u4E94",n:"\u536B",o:"\u5B8C",p:"\u95EE",r:"\u7269",s:"\u6E29",u:"\u5FD8",v:"\u5C4B",y:"\u4E3A"},x:{";":"\u60F3",b:"\u59D3",c:"\u4E61",d:"\u89C1",e:"\u7CFB",f:"\u60F3",g:"\u54CD",h:"\u4ED9",i:"\u8C22",j:"\u578B",k:"\u7701",l:"\u559C",m:"\u9192",n:"\u6653",o:"\u6027",q:"\u606F",r:"\u9009",s:"\u6D88",t:"\u987B",u:"\u6548",v:"\u5BFB",w:"\u5E0C",x:"\u4E60"},y:{";":"\u4E00",a:"\u8425",c:"\u9A8C",d:"\u91CE",e:"\u8FCE",f:"\u6768",g:"\u5458",h:"\u6709",i:"\u8BF4",j:"\u5143",k:"\u533B",l:"\u8D8A",m:"\u71D5",n:"\u4E5F",r:"\u79FB",s:"\u6F14",u:"\u6447",v:"\u5F02",w:"\u8C37",x:"\u4EE5",y:"\u70DF"},z:{";":"\u5728",a:"\u8457",c:"\u7EC8",d:"\u4E2D",e:"\u4E89",f:"\u6B62",g:"\u54B1",h:"\u505A",i:"\u8BC1",j:"\u73E0",k:"\u8F6C",l:"\u8D75",m:"\u518D",n:"\u5B50",o:"\u5B57",q:"\u8FFD",r:"\u957F",s:"\u6CE8",t:"\u8D28",u:"\u8D44",v:"\u5F20",y:"\u5DDE"}},Object.entries(Shuang.resource.dict).forEach(function(a){var b=_slicedToArray(a,2),c=b[0],d=b[1];return Shuang.resource.dict[c].list=Object.keys(d)}),Shuang.resource.dict.list=Object.keys(Shuang.resource.dict),Shuang.resource.schemeList={cqkm:"\u8D85\u5F3A\u5FEB\u7801"},Shuang.app.modeList={"all-random":{name:"\u5168\u90E8\u968F\u673A",desc:"\u5168\u90E8\u62FC\u97F3\u7EC4\u5408"},"all-order":{name:"\u5168\u90E8\u987A\u5E8F",desc:"\u5168\u90E8\u62FC\u97F3\u7EC4\u5408"},"hard-random":{name:"\u56F0\u96BE\u968F\u673A",desc:"\u97F5\u6BCD\u9700\u8F6C\u6362"},"hard-random-without-pinyin":{name:"\u65E0\u62FC\u97F3",desc:"\u65E0\u62FC\u97F3\u63D0\u793A"}},Shuang.core.model=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,a),this.sheng=b.toLowerCase(),this.yun=c.toLowerCase(),this.dict=Shuang.resource.dict[this.sheng][this.yun],this.scheme=new Set,this.view={sheng:this.sheng.toUpperCase().slice(0,1)+this.sheng.slice(1),yun:this.yun}}return _createClass(a,[{key:"beforeJudge",value:function beforeJudge(){var a=this;this.scheme.clear();var b=Shuang.app.setting.config.scheme,c=Shuang.resource.scheme[b].detail,d=this.sheng+this.yun;if(c.other[d])Array.isArray(c.other[d])?c.other[d].forEach(function(b){return a.scheme.add(b)}):this.scheme.add(c.other[d]);else{var e,f=_createForOfIteratorHelper(c.sheng[this.sheng]);try{for(f.s();!(e=f.n()).done;){var g,h=e.value,i=_createForOfIteratorHelper(c.yun[this.yun]);try{for(i.s();!(g=i.n()).done;){var o=g.value;this.scheme.add(h+o)}}catch(a){i.e(a)}finally{i.f()}}}catch(a){f.e(a)}finally{f.f()}if("u"===this.yun&&"jqxy".includes(this.sheng)){var j,k=_createForOfIteratorHelper(c.sheng[this.sheng]);try{for(k.s();!(j=k.n()).done;){var l,m=j.value,n=_createForOfIteratorHelper(c.yun.v);try{for(n.s();!(l=n.n()).done;){var p=l.value;this.scheme.add(m+p)}}catch(a){n.e(a)}finally{n.f()}}}catch(a){k.e(a)}finally{k.f()}}}}},{key:"judge",value:function judge(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return this.beforeJudge(),this.scheme.has(a.toLowerCase()+b.toLowerCase())}}],[{key:"getRandom",value:function getRandom(){var b=Math.floor,c=Shuang.resource.dict.list[b(Math.random()*Shuang.resource.dict.list.length)],d=Shuang.resource.dict[c].list[b(Math.random()*Shuang.resource.dict[c].list.length)],e=new a(c,d);return a.isSame(e,Shuang.core.current)?a.getRandom():e}},{key:"getHardRandom",value:function getHardRandom(){var b;do b=a.getRandom();while(""===b.sheng||1===b.yun.length);return b}},{key:"getByOrder",value:function getByOrder(){for(;;){var b=Shuang.resource.dict.list[Shuang.core.order.shengIndex];if(void 0!==b){var c=Shuang.resource.dict[b].list[Shuang.core.order.yunIndex];if(c)return Shuang.core.order.yunIndex++,new a(b,c)}0===Shuang.core.order.yunIndex?Shuang.core.order.shengIndex=0:(Shuang.core.order.shengIndex++,Shuang.core.order.yunIndex=0)}}},{key:"isSame",value:function isSame(c,a){return c.sheng===a.sheng&&c.yun===a.yun}}]),a}(),Shuang.app.setting={config:{},reload:function reload(){this.config={scheme:readStorage("scheme")||"ziranma",mode:readStorage("mode")||"all-random",showPic:readStorage("showPic")||"true",darkMode:readStorage("darkMode")||detectDarkMode().toString(),autoNext:readStorage("autoNext")||"true",autoClear:readStorage("autoClear")||"true",showKeys:readStorage("showKeys")||"true",showPressedKey:readStorage("showPressedKey")||"true",disableMobileKeyboard:readStorage("disableMobileKeyboard")||"false"};var a=this.config,b=a.scheme,c=a.mode,d=a.showPic,e=a.darkMode,f=a.autoNext,g=a.autoClear,h=a.showKeys,i=a.showPressedKey,j=a.disableMobileKeyboard;Array.prototype.find.call($("#scheme-select").children,function(a){return Shuang.resource.schemeList[b].startsWith(a.innerText)}).selected=!0,$("#mode-select")[Object.keys(Shuang.app.modeList).indexOf(c)].selected=!0,$("#pic-switcher").checked="true"===d,$("#dark-mode-switcher").checked="true"===e,$("#auto-next-switcher").checked="true"===f,$("#auto-clear-switcher").checked="true"===g,$("#show-keys").checked="true"===h,$("#show-pressed-key").checked="true"===i,$("#disable-mobile-keyboard").checked="true"===j,this.setScheme(Shuang.resource.schemeList[b],!1),this.setMode(Shuang.app.modeList[c].name),this.setPicVisible(d),this.setDarkMode(e),this.setAutoNext(f),this.setAutoClear(g),this.setShowKeys(h),this.setShowPressedKey(i),this.setDisableMobileKeyboard(j)},setScheme:function setScheme(a){var b=this,c=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];this.config.scheme=Object.keys(Shuang.resource.schemeList)[Object.values(Shuang.resource.schemeList).findIndex(function(b){return b.startsWith(a)})],importJS("scheme/"+this.config.scheme,function(){c&&Shuang.app.action.next(),Shuang.core.current.beforeJudge(),b.updateKeysHint(),b.updateTips()}),writeStorage("scheme",this.config.scheme)},setMode:function setMode(a){Shuang.core.history=[];for(var b=0,c=Object.entries(Shuang.app.modeList);b<c.length;b++){var d=_slicedToArray(c[b],2),e=d[0],f=d[1].name;if(f===a){this.config.mode=e,$("#mode-desc").innerText=Shuang.app.modeList[e].desc,$("#q").style.display="hard-random-without-pinyin"===e?"none":"block";break}}writeStorage("mode",this.config.mode)},setPicVisible:function setPicVisible(a){this.config.showPic=a.toString(),"false"===this.config.showPic?($("#keyboard").style.display="none",$("#pic-placeholder").style.display="none"):"true"===this.config.showPic&&($("#keyboard").style.display="block",$("#pic-placeholder").style.display="block"),writeStorage("showPic",this.config.showPic),this.updateKeysHintLayoutRatio()},setDarkMode:function setDarkMode(a){this.config.darkMode=a.toString(),"true"===this.config.darkMode?$("body").setAttribute("class","dark-mode"):"false"===this.config.darkMode&&$("body").setAttribute("class",""),writeStorage("darkMode",this.config.darkMode)},setAutoNext:function setAutoNext(a){this.config.autoNext=a.toString(),writeStorage("autoNext",this.config.autoNext)},setAutoClear:function setAutoClear(a){this.config.autoClear=a.toString(),writeStorage("autoClear",this.config.autoClear)},setShowKeys:function setShowKeys(a){this.config.showKeys=a.toString(),writeStorage("showKeys",this.config.showKeys),this.updateKeysHint()},setShowPressedKey:function setShowPressedKey(a){this.config.showPressedKey=a.toString(),writeStorage("showPressedKey",this.config.showPressedKey)},setDisableMobileKeyboard:function setDisableMobileKeyboard(a){this.config.disableMobileKeyboard=a.toString(),"true"===this.config.disableMobileKeyboard?$("#a").setAttribute("inputmode","none"):"false"===this.config.disableMobileKeyboard&&$("#a").setAttribute("inputmode","text"),writeStorage("disableMobileKeyboard",this.config.disableMobileKeyboard)},updateKeysHint:function updateKeysHint(){var a,b=$$(".key"),c=_createForOfIteratorHelper(b);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.classList.remove("answer")}}catch(a){c.e(a)}finally{c.f()}if("false"!==this.config.showKeys){var d,e=_createForOfIteratorHelper(Shuang.core.current.scheme);try{for(e.s();!(d=e.n()).done;){var f=_slicedToArray(d.value,2),g=f[0],h=f[1];b["qwertyuiopasdfghjkl;zxcvbnm".indexOf(g)].classList.add("answer"),b["qwertyuiopasdfghjkl;zxcvbnm".indexOf(h)].classList.add("answer")}}catch(a){e.e(a)}finally{e.f()}this.updateKeysHintLayoutRatio()}},updateKeysHintLayoutRatio:function updateKeysHintLayoutRatio(){if(700>$("body").scrollWidth){var a=310===$("body").scrollWidth?310:$("#pic").scrollWidth,b=1874/1928*a/680;navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent)?($("#keys").style.transform="scale(".concat(b,")"),$("#keys").style.transformOrigin="left top",$("#keys").style.margin="".concat(10*b,"px"),$("#pic-placeholder").style.height="".concat(300*(a/680),"px")):($("#keys").style.marginLeft="10px",$("#keys").style.zoom=b,$("#pic-placeholder").style.zoom=b)}else navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent)?($("#keys").style.transform="unset",$("#keys").style.transformOrigin="unset",$("#pic-placeholder").style.height="300px",$("#keys").style.margin="10px auto"):($("#keys").style.marginLeft="auto",$("#keys").style.zoom="unset",$("#pic-placeholder").style.zoom="unset")},updatePressedKeyHint:function updatePressedKeyHint(a){if("false"!==this.config.showPressedKey&&a){var b,c=$$(".key"),d=_createForOfIteratorHelper(c);try{for(d.s();!(b=d.n()).done;){var f=b.value;f.classList.remove("pressed")}}catch(a){d.e(a)}finally{d.f()}var e="qwertyuiopasdfghjkl;zxcvbnm".indexOf(a.toLowerCase());-1===e||(c[e].classList.add("pressed"),setTimeout(function(){c[e].classList.remove("pressed")},250))}},updateTips:function updateTips(){var a=$("#tips");a.innerHTML="";var b=Shuang.resource.scheme[this.config.scheme];if(b.tips){var c,d=Array.isArray(b.tips)?b.tips:[b.tips],e=_createForOfIteratorHelper(d);try{for(e.s();!(c=e.n()).done;){var f=c.value,g=document.createElement("div");g.classList.add("line"),g.innerHTML=f,a.appendChild(g)}}catch(a){e.e(a)}finally{e.f()}}$("#pic").setAttribute("src","img/".concat(this.config.scheme,".svg"))}};function detectDarkMode(){return!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)||!!(6>new Date().getHours()||22<new Date().getHours())}function readStorage(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return localStorage.getItem(a)}function writeStorage(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";localStorage.setItem(a,b)}Shuang.app.action={init:function init(){var a=this;function b(a,b,c){b.forEach(function(b){var c=document.createElement("option");b.disabled&&c.setAttribute("disabled","disabled"),c.innerText=b.text||b,a.appendChild(c)}),a.onchange=function(a){c(a.target.value)}}navigator&&navigator.userAgent&&/windows|linux/i.test(navigator.userAgent)&&(Shuang.resource.emoji={right:"\u2714\uFE0F",wrong:"\u274C"});var c=Object.values(Shuang.resource.schemeList),d={common:c.filter(function(a){return!a.endsWith("*")}),uncommon:c.filter(function(a){return a.endsWith("*")&&!a.endsWith("**")}).map(function(a){return a.slice(0,-1)}),rare:c.filter(function(a){return a.endsWith("**")}).map(function(a){return a.slice(0,-2)})},e=[{disabled:!0,text:"\u8D85\u5F3A\u7CFB\u5217"}].concat(_toConsumableArray(d.common));b($("#scheme-select"),e,function(a){Shuang.app.setting.setScheme(a)}),b($("#mode-select"),Object.values(Shuang.app.modeList).map(function(a){return a.name}),function(b){Shuang.app.setting.setMode(b),a.next()}),Shuang.core.current=new Shuang.core.model("l","m"),$("#q").innerText=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerText=Shuang.core.current.dict,Shuang.app.setting.reload(),document.addEventListener("keydown",function(a){["Backspace","Tab","Enter"," "].includes(a.key)&&(a.preventDefault?a.preventDefault():event.returnValue=!1)}),document.addEventListener("keyup",function(b){a.keyPressed(b)}),$("#pic-switcher").addEventListener("change",function(a){Shuang.app.setting.setPicVisible(a.target.checked)}),$("#dark-mode-switcher").addEventListener("change",function(a){Shuang.app.setting.setDarkMode(a.target.checked)}),$("#auto-next-switcher").addEventListener("change",function(a){Shuang.app.setting.setAutoNext(a.target.checked)}),$("#auto-clear-switcher").addEventListener("change",function(a){Shuang.app.setting.setAutoClear(a.target.checked)}),$("#show-keys").addEventListener("change",function(a){Shuang.app.setting.setShowKeys(a.target.checked)}),$("#show-pressed-key").addEventListener("change",function(a){Shuang.app.setting.setShowPressedKey(a.target.checked)}),$("#disable-mobile-keyboard").addEventListener("change",function(a){Shuang.app.setting.setDisableMobileKeyboard(a.target.checked)}),$(".pay-name#alipay").addEventListener("mouseover",function(){Shuang.app.action.qrShow("alipay-qr")}),$("#alipay-qr").addEventListener("click",function(a){Shuang.app.action.qrHide(a.target)}),$("#alipay-qr").addEventListener("mouseout",function(a){Shuang.app.action.qrHide(a.target)}),$(".pay-name#wxpay").addEventListener("mouseover",function(){Shuang.app.action.qrShow("wxpay-qr")}),$("#wxpay-qr").addEventListener("click",function(a){Shuang.app.action.qrHide(a.target)}),$("#wxpay-qr").addEventListener("mouseout",function(a){Shuang.app.action.qrHide(a.target)}),$("#wx-name").addEventListener("mouseover",function(){Shuang.app.action.qrShow("wx-qr")}),$("#wx-qr").addEventListener("click",function(a){Shuang.app.action.qrHide(a.target)}),$("#wx-qr").addEventListener("mouseout",function(a){Shuang.app.action.qrHide(a.target)}),$("#dict").addEventListener("click",function(){Shuang.core.current.beforeJudge(),$("#a").value=Shuang.core.current.scheme.values().next().value,a.judge()}),window.addEventListener("resize",Shuang.app.setting.updateKeysHintLayoutRatio),window.resizeTo(window.outerWidth,window.outerHeight);for(var f=$$(".key"),g=function _loop(a){f[a].addEventListener("click",function(){var b=new KeyboardEvent("keyup",{key:"qwertyuiopasdfghjkl;zxcvbnm"[a].toUpperCase()});b.simulated=!0,document.dispatchEvent(b)})},h=0;h<f.length;h++)g(h);this.redo()},keyPressed:function keyPressed(a){switch(a.key){case"Backspace":this.redo();break;case"Tab":Shuang.core.current.beforeJudge(),$("#a").value=Shuang.core.current.scheme.values().next().value,this.judge();break;case"Enter":case" ":this.judge()?this.next():this.redo();break;default:a.simulated&&($("#a").value+=a.key.toLowerCase()),$("#a").value=$("#a").value.slice(0,2).replace(/[^a-zA-Z;]/g,"").split("").map(function(a,b){return 0===b?a.toUpperCase():a.toLowerCase()}).join(""),Shuang.app.setting.updatePressedKeyHint(a.key);var b=2===$("#a").value.length,c=this.judge();b&&(c&&"true"===Shuang.app.setting.config.autoNext?this.next(a.simulated):!c&&"true"===Shuang.app.setting.config.autoClear&&this.redo(a.simulated));}},judge:function judge(){var a=this,b=$("#a"),c=$("#btn"),d=_slicedToArray(b.value,2),e=d[0],f=d[1];return f&&Shuang.core.current.judge(e,f)?(c.onclick=function(){return a.next(!0)},c.innerText=Shuang.resource.emoji.right,!0):(c.onclick=function(){return a.redo(!0)},c.innerText=Shuang.resource.emoji.wrong,!1)},redo:function redo(a){var b=this;$("#a").value="",a||$("#a").focus(),$("#btn").onclick=function(){return b.redo(a)},$("#btn").innerText=Shuang.resource.emoji.wrong},next:function next(a){switch(this.redo(a),Shuang.app.setting.config.mode){case"all-random":Shuang.core.current=Shuang.core.model.getRandom();break;case"all-order":Shuang.core.current=Shuang.core.model.getByOrder();break;case"hard-random":Shuang.core.current=Shuang.core.model.getRandom();break;case"hard-random-without-pinyin":do Shuang.core.current=Shuang.core.model.getRandom();while(Array.isArray(Shuang.core.current.dict));}Shuang.core.history.includes(Shuang.core.current.sheng+Shuang.core.current.yun)?this.next():Shuang.core.history=[].concat(_toConsumableArray(Shuang.core.history),[Shuang.core.current.sheng+Shuang.core.current.yun]).slice(-100),$("#q").innerText=Shuang.core.current.view.sheng+Shuang.core.current.view.yun,$("#dict").innerText=Shuang.core.current.dict,Shuang.core.current.beforeJudge(),Shuang.app.setting.updateKeysHint()},qrShow:function qrShow(a){$("#"+a).style.display="block"},qrHide:function qrHide(a){a.style.display="none"}},Shuang.app.action.init();